dojo.provide("littleshoot.Constants");dojo.provide("littleshoot.littleshootlib");Constants={CLIENT_URL:"http://p2p2o.littleshoot.org:8107/api/client/",CLIENT_SECURE_URL:"http://p2p2o.littleshoot.org:8107/api/client/secure/",DOWNLOAD_URL:"http://p2p2o.littleshoot.org:8107/api/client/download/",DOWNLOADS_URL:"http://p2p2o.littleshoot.org:8107/api/client/downloads",DOWNLOAD_TORRENT_URL:"http://p2p2o.littleshoot.org:8107/api/client/downloadTorrent/",START_TORRENT_DOWNLOAD_URL:"http://p2p2o.littleshoot.org:8107/api/client/startTorrentDownload/",STREAM_DOWNLOAD_URL:"http://p2p2o.littleshoot.org:8107/api/client/streamDownload/",IMAGES:"http://littleshootimages.appspot.com/images/",AUDIO_IMAGE:"http://littleshootimages.appspot.com/images/icons/audio_75x75.gif",VIDEOS_IMAGE:"http://littleshootimages.appspot.com/images/icons/video_75x75.gif",IMAGES_IMAGE:"http://littleshootimages.appspot.com/images/icons/image_75x75.gif",DOCS_IMAGE:"http://littleshootimages.appspot.com/images/icons/document_75x75.gif",APPS_IMAGE:"http://littleshootimages.appspot.com/images/icons/application_75x75.gif",SERVER_URL:"api/",API_URL:"api/",FULL_API_URL:"http://www.littleshoot.org/api/",CLIENT_COOKIE_KEY:"littleShootData",SET_FROM_CLIENT_COOKIE_KEY:"littleShootClientCookie",VERSION_MESSAGE:"LittleShoot 0.61 is here! This version improves downloading and searching  and includes over 40 bug fixes. Would you like to download the new version now?",CURRENT_VERSION:0.61,MAIN_LINE_VERSION:0,PUBLIC_PERMISSION:0,GROUP_PERMISSION:1,PRIVATE_PERMISSION:2,API_VERSION:1,DOWNLOADED_COOKIE_KEY:"downloadedCookie",RESULTS_PER_PAGE:20};dojo.provide("littleshoot.CommonUtils");dojo.require("dojo.number");dojo.require("dijit.form.Button");dojo.require("dijit.Dialog");CommonUtils={currentPage:"",commonLoad:function(){},windowId:function(){if(!window.uuid){window.uuid=Math.floor(Math.random()*1000000000)}return window.uuid},showMessage:function(b,a){var d;if(typeof a==="string"){d=CommonUtils.createTextElement(a)}else{d=a}var c=CommonUtils.createMessage(b,d);c.show();return c},createTextElement:function(b){var a=document.createElement("span");$(a).addClass("normalMedium").addClass("commonDialogText").html(b);return a},createRawMessage:function(b,d){var c=document.createElement("center");var a=document.createElement("div");c.appendChild(a);dojo.addClass(a,"commonDialogDiv");dojo.addClass(a,"littleShoot");a.appendChild(d);var e=new dijit.Dialog({title:b});e.startup();e.setContent(c);return e},createMessage:function(b,e){var d=document.createElement("center");var a=document.createElement("div");d.appendChild(a);dojo.addClass(a,"commonDialogDiv");dojo.addClass(a,"littleShoot");a.appendChild(e);a.appendChild(document.createElement("br"));a.appendChild(document.createElement("br"));var c=document.createElement("div");a.appendChild(c);var g=new dijit.form.Button({type:"submit",label:"OK"},c);var f=new dijit.Dialog({title:b});f.startup();f.setContent(d);return f},showError:function(a){CommonUtils.showMessage("Error","We seem to be experiencing problems.  There was an unknown error described as: "+a)},showChoicesDialog:function(p,o,d,m,l,k){var e=document.createElement("center");var j=document.createElement("div");e.appendChild(j);dojo.addClass(j,"commonDialogDiv");dojo.addClass(j,"littleShoot");var f=document.createElement("span");dojo.addClass(f,"normalMedium");dojo.addClass(f,"commonDialogText");f.innerHTML=o;j.appendChild(f);j.appendChild(document.createElement("br"));j.appendChild(document.createElement("br"));var h=document.createElement("div");j.appendChild(h);var g=new dijit.form.Button({type:"submit",label:l},h);var c=document.createElement("div");j.appendChild(c);var n=new dijit.Dialog({title:p,execute:d});function b(){n.hide();if(m){m()}}var a=new dijit.form.Button({label:k,onClick:b},c);n.startup();n.setContent(e);n.show();return n},showConfirmDialog:function(a,d,c,b){return CommonUtils.showChoicesDialog(a,d,c,b,"OK","Cancel")},setValue:function(a,c){var b=dijit.byId(a);if(!b){return}b.setValue(c)},setMessage:function(a,b){$("#"+elementID).html(b)},clearMessage:function(a){var b=dojo.byId(a);if(!b){return}b.innerHTML=""},showPluginRequiredDialog:function(){var a="We're sorry, but LittleShoot must be installed to use this feature.  You'll be notified as soon as you can join!  Thanks for your patience.";CommonUtils.showMessage("Sorry!",a)},showEmailCollectDialog:function(){dijit.byId("emailCollectDialog").show()},isValidEmail:function(a){if(!dojox.validate.isEmailAddress(a)){console.warn("Not an email address: "+a);CommonUtils.showMessage("Not an E-mail Address","You didn't enter an e-mail address.  Please try again.");return false}else{console.info("Got an email address: "+a);return true}},getHtml:function(a){return dojo.xhrGet({url:a,handleAs:"text",timeout:20000,load:function(c,b){return c},error:function(c,b){CommonUtils.showMessage("Error Loading Page","Sorry, but we seem to be having problems.  We should have this fixed soon.");return c}})},isBrowserSupported:function(){if(/Windows/.test(navigator.userAgent)){if(/msie/.test(navigator.userAgent.toLowerCase())){if(!this.isIe7OrAbove()){return false}}}return true},isIe7OrAbove:function(){return(dojo.isIE>6)},setPage:function(a){CommonUtils.currentPage=a},onIndexPage:function(){if(!CommonUtils.currentPage){return false}else{if(CommonUtils.currentPage==="index"){return true}}return false},startsWith:function(b,a){return b.indexOf(a)===0},endsWith:function(c,a){var b=c.length-a.length;return b>=0&&c.lastIndexOf(a)===b},showIncompatibleBrowserDialog:function(){dojo.addOnLoad(function(){var a="We're sorry, but LittleShoot does not support Internet Explorer 6 at this time.  Please use FireFox, Opera, or Internet Explorer 7.  We recommend FireFox.  You can download it at http://www.getfirefox.com.";CommonUtils.showMessage("Incompatible Browser",a)})},queryToObject:function(){var a=window.location.search.substring(1);return dojo.queryToObject(a)},getDecodedArg:function(a){return decodeURIComponent(CommonUtils.getArg(a))},getArg:function(a){var b=CommonUtils.queryToObject();return b[a]},hasArg:function(a){return CommonUtils.getArg(a)},isArgTrue:function(a){return CommonUtils.getArg(a)=="true"},isLinux:function(){if(/Windows/.test(navigator.userAgent)){return false}else{if(/Mac/.test(navigator.userAgent)){return false}else{return true}}},showAll:function(a){dojo.query(a).forEach(function(b){CommonUtils.showElement(b)})},hideAll:function(a){dojo.query(a).forEach(function(b){CommonUtils.hideElement(b)})},hideElement:function(a){if(!a){console.warn("Element does not exist");return null}a.style.display="none";return a},showElement:function(a){if(!a){console.warn("Element does not exist");return null}a.style.display="";return a},pointerX:function(a){return a.pageX||(a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft))},empty:function(){},pointerY:function(a){return a.pageY||(a.clientY+(document.documentElement.scrollTop||document.body.scrollTop))},realOffset:function(b){var a=0,c=0;do{a+=b.scrollTop||0;c+=b.scrollLeft||0;b=b.parentNode}while(b);return[c,a]},withinIncludingScrolloffsets:function(b,a,d){var c=this.realOffset(b);this.xcomp=a+c[0]-this.deltaX;this.ycomp=d+c[1]-this.deltaY;this.offset=this.cumulativeOffset(b);return(this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+b.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+b.offsetWidth)},cumulativeOffset:function(b){var a=0,c=0;do{a+=b.offsetTop||0;c+=b.offsetLeft||0;b=b.offsetParent}while(b);return[c,a]},within:function(b,a,c){if(this.includeScrollOffsets){return this.withinIncludingScrolloffsets(b,a,c)}this.xcomp=a;this.ycomp=c;this.offset=this.cumulativeOffset(b);return(c>=this.offset[1]&&c<this.offset[1]+b.offsetHeight&&a>=this.offset[0]&&a<this.offset[0]+b.offsetWidth)},isEmpty:function(a){return a===""},isBlank:function(a){if(!a){return true}return/^\s*$/.test(a)},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},setCookie:function(e,c){var b=new Date();var d=(1000*60*60*24*7);var a=d*10;b.setTime(b.getTime()+a);if(CommonUtils.domainIsLittleShoot()){dojo.cookie(e,c,{expires:b,domain:".littleshoot.org"})}else{dojo.cookie(e,c,{expires:b})}console.info("Set cookie!!")},deleteCookie:function(a){if(CommonUtils.domainIsLittleShoot()){dojo.cookie(a,null,{expires:-1,domain:".littleshoot.org"})}else{dojo.cookie(a,null,{expires:-1})}},domainIsLittleShoot:function(){return CommonUtils.endsWith(window.location.hostname,"littleshoot.org")},param:function(a){if(CommonUtils.isBlank(a)){throw new Error("Blank paramater!!")}},inGroup:function(){return CommonUtils.inGroupBase(window.location.hostname)},inGroupBase:function(b){var a=/(.*)\.littleshoot.org/i.exec(b);if(!a){return false}if(a.length<2){return false}var c=a[1];if(c=="www"){return false}return true},getGroupName:function(){return CommonUtils.getGroupNameBase(window.location.hostname)},getGroupNameBase:function(a){var b=/(.*)\.littleshoot.org/i.exec(a);return b[1]},loadPlayer:function(){CommonUtils.loadJs("http://mediaplayer.yahoo.com/js")},loadJs:function(b,c){var a=CommonUtils.buildScript(b,c);dojo.doc.getElementsByTagName("head")[0].appendChild(a)},buildScript:function(a,c){var b=dojo.doc.createElement("script");b.type="text/javascript";b.src=a;if(c){b.id=c}return b},showDownloadConfirmDialog:function(){CommonUtils.showConfirmDialog("Download LittleShoot?","Would you like to start downloading the LittleShoot P2P Plugin now?",function(){CommonUtils.downloadInstaller()})},downloadInstaller:function(){console.info("Downloading installer...");if(CommonUtils.isLinux()){CommonUtils.showMessage("Linux Not Ready!","We're sorry, but the Linux version of the latest LittleShoot is not ready at this time. We should have this fixed in the next several months.")}else{CommonUtils.setCookie(Constants.DOWNLOADED_COOKIE_KEY,true);var a=Common.getDownloadUrl();window.location.href=a;if(pageTracker){pageTracker._trackPageview(a)}}},createHttpsUrl:function(a){return"https://"+window.location.host+"/lastbamboo-server-site/api/"+a},showSpinner:function(b){if(!b){b="body"}var d=dojo.byId(b+"Loading");if(d){d=null;return}var e=document.createElement("div");e.id=b+"Loading";e.className="loading";var a=document.createElement("img");a.setAttribute("src",Constants.IMAGES+"loading.gif");e.appendChild(a);var c=dojo.byId(b);if(!c){console.error("Element does not exist: "+b)}else{c.appendChild(e)}e=null;c=null;a=null},showHighSpinner:function(){var b="body";var d=document.createElement("div");d.id=b+"Loading";d.className="loadingOffsetHigh";var a=document.createElement("img");a.setAttribute("src",Constants.IMAGES+"loading.gif");d.appendChild(a);var c=dojo.byId(b);if(!c){}else{c.appendChild(d)}d=null;c=null;a=null},hideSpinner:function(a){if(!a){a="body"}var b=dojo.byId(a+"Loading");if(!b){}else{b.parentNode.removeChild(b)}b=null},addGroupLogoNoFade:function(){if(!CommonUtils.inGroup()){return}var d=CommonUtils.getGroupName();var c=Constants.IMAGES+d+".jpg";var b=document.createElement("img");b.setAttribute("src",c);var a=dojo.byId("customLogoDiv");if(!a){return}a.appendChild(b)},addGroupLogo:function(){if(!CommonUtils.inGroup()){return}var e=CommonUtils.getGroupName();var d=Constants.IMAGES+e+".jpg";var b=document.createElement("img");b.setAttribute("src",d);var a=dojo.byId("customLogoDiv");if(!a){return}a.appendChild(b);var c=dojo.fadeIn({node:a,duration:6000});c.play()},isLoggedIn:function(){return User.isLoggedIn()},editFile:function(){CommonUtils.keyFormRequest("editFileDialog","editFile",CommonUtils.loadFiles)},loadFiles:function(){console.info("Loading files...");var b=new littleshoot.FileResource();var a=new littleshoot.ResourceLoader("files",b,true);a.loadResultsPage(0)},keyFormRequest:function(a,d,f){var g=CommonUtils.keyId();var b=CommonUtils.requestKey(g);var e=dojo.hitch(this,function(h){console.info("Got deferred response: "+h);CommonUtils.signFormRequest(a,d,f,g)});var c=dojo.hitch(this,function(h){console.error("Got error response: "+h)});b.addCallback(e);b.addErrback(c)},signFormRequest:function(k,m,c,g){if(!m){console.error("No path");throw new Error("Need a path")}var d=dijit.byId(k);var a=Constants.CLIENT_SECURE_URL+"signedRelay";var b=d.getValues();b.path=m;b.keyId=g;var j=dojo.cookie("siteKey");if(!j){console.error("No site key");throw new Error("No site key!!")}var l=ClientApi.createSignature(a,b,j);b.signature=l;CommonUtils.showSpinner();var h=dojo.io.script.get({url:a,callbackParamName:"callback",load:function(n,o){return n},error:function(n,o){console.dir(o);return n},content:b,timeout:30000});var f=dojo.hitch(this,function(n){console.info("Got deferred response: "+n);if(!n.success){CommonUtils.showMessage("Submission Error",n.message);return}c()});var e=dojo.hitch(this,function(n){console.error("Got error response: "+n);CommonUtils.showMessage("LittleShoot Error","We're sorry, but there was an error contacting LittleShoot.  Please try again later.")});h.addCallback(f);h.addErrback(e);h.addBoth(function(){CommonUtils.hideSpinner()})},bytesToMb:function(a){if(!a){return 0}var b=a/1048576;return dojo.number.format(b,{places:2})},secondsToMinutes:function(a){return Math.floor(a/60)+":"+(a%60).toFixed()},endsWith:function(d,b){var c=d.length-b.length;if(c<0){return false}var a=d.substring(c);return a==b},extractUriPath:function(b){var a=/.*\/(.*)/;var c=a.exec(b);return c[1]},findParent:function(b,c){var a=b;for(i=0;i<5;i++){a=a.parentNode;if(dojo.hasClass(a,c)){return a}}return null},keyId:function(){return Math.floor(Math.random()*1000000000)},requestKey:function(c){var b={keyId:c};CommonUtils.showSpinner();var a=dojo.xhrPost({url:Constants.SERVER_URL+"key/",content:b,handleAs:"text",load:function(d,e){console.info("Got response data: "+d);return d},error:function(d,e){console.dir(e);return d},timeout:20000});a.addBoth(function(){CommonUtils.hideSpinner()});return a},clearChildren:function(b){var a=b.childNodes;for(i=a.length-1;i>=0;i--){b.removeChild(a[i])}},clearBoth:function(){var a=document.createElement("div");a.className="clearBoth";return a},fileDialogApplet:null,APPLET_NAME:"LittleShootApplet",appletLoadCalled:false,showFileDialog:function(){if(CommonUtils.fileDialogApplet===null){CommonUtils.showSpinner();CommonUtils.loadLittleShootApplet();setTimeout(function(){try{CommonUtils.fileDialogApplet=$("#LittleShootAppletId")[0];CommonUtils.fileDialogApplet.newFileDialog()}catch(a){CommonUtils.fileDialogApplet=null;CommonUtils.showMessage("File Dialog Error","We're sorry, but there was an error loading the LittleShoot publishing dialog. It should be work in a second if you try again. If you keep getting errors, please e-mail us at bugs@littleshoot.org with your browser details. The reported error is "+a+". Thanks!")}CommonUtils.hideSpinner()},2000)}else{CommonUtils.fileDialogApplet.newFileDialog()}},useApplet:function(){return true},loadLittleShootApplet:function(){if(CommonUtils.useApplet()&&!CommonUtils.appletLoadCalled){CommonUtils.appletLoadCalled=true;CommonUtils.loadApplet(CommonUtils.APPLET_NAME)}},loadApplet:function(b){console.info("Creating applet in JavaScript!!!");var a=CommonUtils.newAppletElement(b);document.getElementsByTagName("body")[0].appendChild(a);console.info("Appended applet to body")},newAppletElement:function(c){var b=document.createElement("applet");b.setAttribute("name",c);b.id=c+"Id";b.setAttribute("code",c+".class");b.setAttribute("mayscript",true);b.setAttribute("width",1);b.setAttribute("height",1);var d={position:"absolute",top:"-300px"};dojo.style(b,d);var a=document.createElement("div");a.appendChild(b);return a},setDefaultImgProperties:function(b,a){switch(a){case"audio":b.src=Constants.AUDIO_IMAGE;break;case"video":b.src=Constants.VIDEOS_IMAGE;break;case"image":b.src=Constants.IMAGES_IMAGE;break;case"document":b.src=Constants.DOCS_IMAGE;break;case"application/mac":b.src=Constants.APPS_IMAGE;break;case"application/linux":b.src=Constants.APPS_IMAGE;break;case"application/win":b.src=Constants.APPS_IMAGE;break;default:b.src=Constants.DOCS_IMAGE}b.width=75;b.height=75},get:function(a){if(!a){throw new Error("No config!!")}var b=dojo.io.script.get(a);return b},littleShootNpapiCallback:function(b,a){if(!littleShootConfig){console.info("LittleShoot config not defined");return}littleShootConfig.cookieCallbackComplete=true;CommonUtils.makeCallbacks(b,a)},littleShootCookieCallback:function(b,a){if(!littleShootConfig){console.info("LittleShoot config not defined");return}littleShootConfig.cookieCallbackComplete=true;CommonUtils.makeCallbacks(b,a)},littleShootLocalCallback:function(b,a){if(!littleShootConfig){console.info("LittleShoot config not defined");return}littleShootConfig.localCallbackComplete=true;if(littleShootConfig.cookieCallbackComplete){console.info("Cookie already made callback");return}if(littleShootConfig.remoteCallbackComplete){console.info("Remote callback already complete!!");return}CommonUtils.makeCallbacks(b,a)},littleShootRemoteCallback:function(b,a){if(!littleShootConfig){console.info("LittleShoot config not defined");return}if(littleShootConfig.cookieCallbackComplete){console.info("Cookie already made callback");return}if(littleShootConfig.localCallbackComplete){console.info("Local callback already complete!!");return}littleShootConfig.remoteCallbackComplete=true;CommonUtils.makeCallbacks(b,a)},makeCallbacks:function(b,a){if(!b){if(littleShootConfig.littleShootNotPresent){littleShootConfig.littleShootNotPresent()}}else{if(littleShootConfig.littleShootPresent){littleShootConfig.littleShootPresent(a)}}},showUpdateDialog:function(){CommonUtils.showConfirmDialog("New Version",Constants.VERSION_MESSAGE,CommonUtils.downloadInstaller)},pollForLittleShoot:function(){console.info("About to load movie");var a=dojo.byId("littleShootFlashContent");console.info("Got movie: "+a);a.poll()},loadFlash:function(){if(!swfobject){console.error("No swfobject");throw new Error("No swfobject!!")}console.info("Loading Flash...");var a={};var c={};c.play="true";c.loop="false";c.quality="high";c.allowscriptaccess="always";var b={};b.id="littleShootFlashContent";b.name="LittleShoot";b.align="middle";swfobject.embedSWF("LittleShoot.swf","littleShootNoFlash","0%","0%","9.0.0","expressInstall.swf",a,c,b);console.info("Embedded swf...")},hasLittleShoot:function(){return window.gotLittleShoot}};var AppMonitor=function(){var b={};function a(c){if(!c){console.error("JSON is not defined");return}if(c.appPresent){CommonUtils.setCookie(Constants.CLIENT_COOKIE_KEY,dojo.toJson(c));if(c.appVersion<Constants.CURRENT_VERSION&&c.appVersion!=Constants.MAIN_LINE_VERSION){CommonUtils.showUpdateDialog()}CommonUtils.littleShootLocalCallback(true,c.appVersion);if(dojo.isFunction(onLittleShootFromJavaScript)){onLittleShootFromJavaScript(c)}else{console.warning("No onLittleShootFromJavaScript func")}}else{CommonUtils.deleteCookie(Constants.CLIENT_COOKIE_KEY);CommonUtils.deleteCookie(Constants.SET_FROM_CLIENT_COOKIE_KEY);CommonUtils.littleShootLocalCallback(false)}}b.checkApp=function(){var e=function(h,g){a(h);return h};var d=function(h,g){a({appPresent:false,appVersion:Constants.CURRENT_VERSION});return h};var f={};f.t=(new Date()).getTime();var c=dojo.io.script.get({url:Constants.CLIENT_URL+"appCheck",callbackParamName:"callback",load:e,error:d,content:f,timeout:3000,preventCache:true,noCache:(new Date()).getTime()});return c};b.monitor=function(){var c=function(){instance.timeoutId=setTimeout(function(){var d=instance.checkApp();d.addBoth(c)},2000)};c()};return b}();dojo.provide("littleshoot.LittleShootLoader");dojo.provide("littleshoot.littleshoot");dojo.require("littleshoot.Constants");dojo.require("littleshoot.CommonUtils");dojo.require("dojo.cookie");dojo.require("dojo.io.script");LittleShoot={downloadPrompt:function(){CommonUtils.showConfirmDialog("LittleShoot Required","You need the LittleShoot plugin to use this site. Would you like to install it now?",CommonUtils.downloadInstaller)},p2pUrl:function(b,a){if(!a){a=CommonUtils.extractUriPath(b)}var c=Constants.DOWNLOAD_URL+a+"?uri=";c+=encodeURIComponent(b);return c},hasLittleShoot:function(){console.info("Running check for LittleShoot.");if(LittleShoot.hasPlugin()){return}console.warn("Did not find LittleShoot plugin!!");var c=LittleShoot.checkLittleShootLocal();if(c){return}var d=function(g,f){if(g.appPresent){CommonUtils.littleShootRemoteCallback(true,g.appVersion)}else{CommonUtils.littleShootRemoteCallback(false)}return g};var b=function(g,f){CommonUtils.littleShootRemoteCallback(false);return g};var e={};e.t=(new Date()).getTime();var a=dojo.io.script.get({url:Constants.FULL_API_URL+"littleShootData",callbackParamName:"callback",load:d,error:b,content:e,timeout:30000,noCache:(new Date()).getTime()});return a},loadNpapi:function(){console.info("Loading NPAPI");var a=navigator.mimeTypes["application/x-littleshoot"];if(a){var b=a.enabledPlugin;if(b){if(!$.browser.msie){$("#littleShootEmbed").html('<embed type="application/x-littleshoot" pluginspage="http://www.littleshoot.org"></embed>');CommonUtils.littleShootNpapiCallback(true,0.9);LittleShoot.fadeLoading();return true}else{return false}}else{return false}}else{return false}},hasPlugin:function(){if($.browser.msie){try{var a=new ActiveXObject("Mozilla.PluginHostCtrl.1");$("#littleShootEmbed").html('<OBJECT ID="littleshoot" CLASSID="CLSID:0CC00AEB-7E95-4a80-8C29-ED90939FC99F" CODEBASE="axlittleshoot.cab#version=0,9,0,0" width="1" height="1"><PARAM name="type" value="application/x-bittorrent"/></OBJECT>');CommonUtils.littleShootNpapiCallback(true,0.9);LittleShoot.fadeLoading();return true}catch(b){return false}}else{if(navigator.plugins&&navigator.plugins.length){if(!LittleShoot.loadNpapi()){navigator.plugins.refresh(false);return LittleShoot.loadNpapi()}else{return true}}else{return false}}},checkLittleShootLocal:function(){var c=dojo.cookie(Constants.CLIENT_COOKIE_KEY);var d=false;if(c){var e=dojo.fromJson(c);var b=e.appPresent;if(b){CommonUtils.littleShootCookieCallback(true,e.appVersion);LittleShoot.fadeLoading();d=true}}var a=AppMonitor.checkApp();a.addBoth(function(){LittleShoot.fadeLoading()});return d},fadeLoading:function(){if(!littleShootConfig){logging.info("No littleshoot config");return}if(littleShootConfig.littleShootLoading){var b=dojo.byId(littleShootConfig.littleShootLoading);if(b){var a=dojo.fadeOut({node:b});a.play();if(b.parentNode){b.parentNode.removeChild(b)}}}}};jQuery().ready(function(){dojo.addOnLoad(function(){if(!littleShootConfig){littleShootConfig={}}if(littleShootConfig.disableAutoLoad){return}LittleShoot.hasLittleShoot()})});